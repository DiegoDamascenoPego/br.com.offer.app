spring:
  application:
    name: offer-app
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true
    clean-disabled: true
  datasource:
    url: jdbc:postgresql://localhost:5432/offer?ApplicationName=offer-app
    username: postgres
    password: totvs@123
    hikari:
      minimum-idle: 0
      maximum-pool-size: 18
      idle-timeout: 100000
      connection-timeout: 200000
      max-lifetime: 300000
      transaction-isolation: TRANSACTION_READ_COMMITTED
      auto-commit: false
      data-source-properties:
        useServerPrepStmts: false
        cachePrepStmts: true
        prepStmtCacheSize: 500
        prepStmtCacheSqlLimit: 1024
  jpa:
    open-in-view: false
    generate-ddl: false
    hibernate:
      ddl-auto: none
      naming:
        physical-strategy: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
        implicit-strategy: jpa
    properties:
      # org.hibernate.cfg.AvailableSettings
      hibernate:
        types:
          print:
            banner: false
        cache:
          '[use_second_level_cache]': false
        connection:
          '[provider_disables_autocommit]': true
        jdbc:
          '[batch_size]': 30
          '[batch_versioned_data]': true
          '[time_zone]': UTC
        '[order_inserts]': true
        '[order_updates]': true
        query:
          '[in_clause_parameter_padding]': true
          '[fail_on_pagination_over_collection_fetch]': true
          '[plan_cache_max_size]': 4096
        session:
          events:
            log:
              '[LOG_QUERIES_SLOWER_THAN_MS]': 450
  security:
    oauth2:
      client:
        registration:
          keycloak:
            client-id: offer
            client-secret: kMKhNnuwv5kR4wtyP3FfjdwnSFxHHBJD
            scope:
              - openid
              - profile
              - email
        provider:
          keycloak:
            issuer-uri: http://localhost:7080/realms/master
      resourceserver:
        jwt:
          issuer-uri: http://localhost:7080/realms/master
          jwk-set-uri: http://localhost:7080/realms/master/protocol/openid-connect/certs

    jwt:
      auth:
        converter:
          resource-id: offer
          principle-attribute: preferred_username

logging:
  level:
    org:
      springframework:
        security: DEBUG




# Configuração do SpringDoc para APIs REST
springdoc:
  info:
    title: "Offer App API"
    description: "API para sistema de ofertas e leilões"
  swagger-ui:
    path: /swagger-ui.html

